
self.addEventListener("install", async event => {
    const cache = await caches.open("pwa-assets");
    // it stores all resources on first SW install
    cache.addAll([
        "/",
        "app.js",
        "style.css",
        "lib/avsc.5.7.7.esm.js",
        "lib/camera-controls.module.min.js",
        "lib/pico.conditional.min.css",
        "lib/resizable-style.css",
        "lib/resizable.js",
        "lib/shp.esm.js",
        "lib/three.core.min.js",
        "lib/three.tsl.min.js",
        "lib/three.webgpu.min.js",
        "lib/vega-embed.6.26.0.js",
        "lib/vega-lite.5.21.0.js",
        "lib/vega.5.30.0.js",
        "lib/leaflet/leaflet-src.esm.js",
        "lib/leaflet/leaflet-src.esm.js.map",
        "lib/leaflet/leaflet-src.js",
        "lib/leaflet/leaflet-src.js.map",
        "lib/leaflet/leaflet.css",
        "lib/leaflet/leaflet.js",
        "lib/leaflet/leaflet.js.map",
        "lib/leaflet/images/layers-2x.png",
        "lib/leaflet/images/layers.png",
        "lib/leaflet/images/marker-icon-2x.png",
        "lib/leaflet/images/marker-icon.png",
        "lib/leaflet/images/marker-shadow.png",
        "lib/threeModules/libs/stats.module.js",
        "lib/threeModules/loaders/GLTFLoader.js",
        "lib/threeModules/objects/SkyMesh.js",
        "lib/threeModules/objects/WaterMesh.js",
        "lib/threeModules/tsl/display/GaussianBlurNode.js",
        "lib/threeModules/utils/BufferGeometryUtils.js",
        "src/annotation.js",
        "src/avscWorker.js",
        "src/heatmapWorker.js",
        "src/Lut.js",
        "src/main.js",
        "src/map.js",
        "src/particles.js",
        "src/plot.js",
        "src/sw.js",
        "resources/cargoship.glb",
        "resources/close.svg",
        "resources/data.avro",
        "resources/HELCOM_marine_area.latlng.zip",
        "resources/label.png",
        "resources/label.svg",
        "resources/OpenSans-Bold.ttf",
        "resources/OpenSans-Regular.ttf",
        "resources/perlin_noise_128x128.png",
        "resources/smoke.png",
        "resources/timeSeries.avro",
        "resources/waternormals.jpg",
        "resources/images/antifouling_1_inertcoating.jpg",
        "resources/images/antifouling_2_biocidal_copper_coating.jpg",
        "resources/images/antifouling_3_foulrelease_biocidefree_silicon_coating.jpg",
        "resources/images/Antifouling_Cu_load_2018.png",
        "resources/images/antifouling_hullmaster.png",
        "resources/images/antifouling_QR_hullmaster.png",
        "resources/images/BalW_discharge_hotspot_EU_2018.png",
        "resources/images/biofouling_1.jpg",
        "resources/images/biofouling_2.jpg",
        "resources/images/biofouling_3.jpg",
        "resources/images/Metadata.txt",
        "resources/images/scrubber_mussel_exposure.jpg",
        "resources/images/scrubber_seaurchin_exposed.jpg",
        "resources/images/scrubber_system.svg",
        "resources/images/ytreberg_2022_Vanadin.png",
        "resources/sdg_icons/E_SDG_PRINT-01.jpg",
        "resources/sdg_icons/E_SDG_PRINT-02.jpg",
        "resources/sdg_icons/E_SDG_PRINT-03.jpg",
        "resources/sdg_icons/E_SDG_PRINT-04.jpg",
        "resources/sdg_icons/E_SDG_PRINT-05.jpg",
        "resources/sdg_icons/E_SDG_PRINT-06.jpg",
        "resources/sdg_icons/E_SDG_PRINT-07.jpg",
        "resources/sdg_icons/E_SDG_PRINT-08.jpg",
        "resources/sdg_icons/E_SDG_PRINT-09.jpg",
        "resources/sdg_icons/E_SDG_PRINT-10.jpg",
        "resources/sdg_icons/E_SDG_PRINT-11.jpg",
        "resources/sdg_icons/E_SDG_PRINT-12.jpg",
        "resources/sdg_icons/E_SDG_PRINT-13.jpg",
        "resources/sdg_icons/E_SDG_PRINT-14.jpg",
        "resources/sdg_icons/E_SDG_PRINT-15.jpg",
        "resources/sdg_icons/E_SDG_PRINT-16.jpg",
        "resources/sdg_icons/E_SDG_PRINT-17.jpg"
    ]);
});

self.addEventListener("fetch", event => {
   event.respondWith(
     fetch(event.request)
     .catch(error => {
       return caches.match(event.request);
     })
   );
});

